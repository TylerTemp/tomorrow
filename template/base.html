<!doctype html>
<html class="no-js" lang="{{ locale.code }}">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="description" content="{% block site_description %}{{ _('Tyler\'s personal blog for sharing works, ideas, experience ect.') }}{% end %}">
  <meta name="keywords" content="{% block site_kwd %}python,jolla{% end %}">
  <meta name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
  <title>{% block title %}{% end %} | {{ _("Tomorrow Becomes Today") }}</title>

  <!-- Set render engine for 360 browser -->
  <meta name="renderer" content="webkit">

  <!-- No Baidu Siteapp-->
  <meta http-equiv="Cache-Control" content="no-siteapp"/>
  <meta name="baidu-site-verification" content="{% block baidusucks %}9s22UsBcjK{% end %}" />

  <link rel="icon" type="image/png" href="{{ static_path('/i/favicon.png') }}">

{% block webapp %%}
  <!-- Add to homescreen for Chrome on Android -->
  <meta name="mobile-web-app-capable" content="yes">
  <link rel="icon" sizes="192x192" href="{{ static_path('i/app-icon72x72@2x.png') }}">

  <!-- Add to homescreen for Safari on iOS -->
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black">
  <meta name="apple-mobile-web-app-title" content="Tomorrow"/>
  <link rel="apple-touch-icon-precomposed" href="{{ static_path('i/app-icon72x72@2x.png') }}">

  <!-- Tile icon for Win8 (144x144 + tile color) -->
  <meta name="msapplication-TileImage" content="{{ static_path('i/app-icon72x72@2x.png') }}">
  <meta name="msapplication-TileColor" content="#0e90d2">
{% end %}
  <link rel="stylesheet" href="https://dn-tomorrow.qbox.me/amazeui.min.css">
  <link rel="stylesheet" href="{{ static_path('css/app.css') }}">

  {# for css #}
  <!-- add iconfont -->
  <style>
  @font-face {font-family: "iconfont";
    src: url('https://dn-tomorrow.qbox.me/iconfont.eot'); /* IE9*/
    src: url('https://dn-tomorrow.qbox.me/iconfont.eot?#iefix') format('embedded-opentype'), /* IE6-IE8 */
    url('https://dn-tomorrow.qbox.me/iconfont.woff') format('woff'), /* chrome、firefox */
    url('https://dn-tomorrow.qbox.me/iconfont.ttf') format('truetype'), /* chrome、firefox、opera、Safari, Android, iOS 4.2+*/
    url('https://dn-tomorrow.qbox.me/iconfont.svg#iconfont') format('svg'); /* iOS 4.1- */
  }

  .iconfont {
    font-family:"Segoe UI", "Lucida Grande", Helvetica, Arial, "Microsoft YaHei", FreeSans, Arimo, "Droid Sans","wenquanyi micro hei","Hiragino Sans GB", "Hiragino Sans GB W3", Arial, sans-serif, "iconfont";
    font-style:normal;
    -webkit-font-smoothing: antialiased;
    -webkit-text-stroke-width: 0.2px;
    -moz-osx-font-smoothing: grayscale;
  }

  .icon-md-simple:before { content: "\e604"; }
  .icon-md-solid:before { content: "\e603"; }
  .icon-jolla:before { content: "\e600"; }

  ::-webkit-input-placeholder {
      font-family: "Segoe UI", "Lucida Grande", Helvetica, Arial, "Microsoft YaHei", FreeSans, Arimo, "Droid Sans","wenquanyi micro hei","Hiragino Sans GB", "Hiragino Sans GB W3", Arial, sans-serif, "iconfont";
  }
  :-moz-placeholder {
      font-family: "Segoe UI", "Lucida Grande", Helvetica, Arial, "Microsoft YaHei", FreeSans, Arimo, "Droid Sans","wenquanyi micro hei","Hiragino Sans GB", "Hiragino Sans GB W3", Arial, sans-serif, "iconfont";
  }
  ::-moz-placeholder {
      font-family: "Segoe UI", "Lucida Grande", Helvetica, Arial, "Microsoft YaHei", FreeSans, Arimo, "Droid Sans","wenquanyi micro hei","Hiragino Sans GB", "Hiragino Sans GB W3", Arial, sans-serif, "iconfont";
  }
  :-ms-input-placeholder {
      font-family: "Segoe UI", "Lucida Grande", Helvetica, Arial, "Microsoft YaHei", FreeSans, Arimo, "Droid Sans","wenquanyi micro hei","Hiragino Sans GB", "Hiragino Sans GB W3", Arial, sans-serif, "iconfont";
  }
  </style>

  {% block neck %}{% end %}
</head>
<body>

{% block nav %}

<header class="am-topbar">
  <h1 class="am-topbar-brand">
    <a href="/">{{ _("Tomorrow.Becomes.Today") }}</a>
  </h1>
  <button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only"
          data-am-collapse="{target: '#nav-collapse'}"><span class="am-sr-only">导航切换</span> <span
      class="am-icon-bars"></span></button>
  <div class="am-collapse am-topbar-collapse" id="nav-collapse">
    <ul class="am-nav am-nav-pills am-topbar-nav">
      <li class="{{ 'am-active' if nav_active == 'home' else '' }}">
        <a href="/"><span class="am-icon-home"> {{ _('Home') }}</span></a>
      </li>
      <li class="am-dropdown" data-am-dropdown>
        <a class="am-dropdown-toggle" data-am-dropdown-toggle href="javascript:;">
          {{ _('Category') }}<span class="am-icon-caret-down"></span>
        </a>
        <ul class="am-dropdown-content">
          <!-- <li class="am-dropdown-header"></li> -->
          <li class="{{ 'am-active' if nav_active == 'jolla_blog' else '' }}">
            <a href="//{{ JOLLA_HOST }}/"><span class="iconfont icon-jolla"> {{ _('Jolla Blog') }}</span></a>
          </li>
        </ul>
      </li>
    </ul>

    <div class="am-topbar-left am-topbar-right am-topbar-btn">
      {% if user_name is None %}
      <div class="am-dropdown" data-am-dropdown>
        <button class="am-btn am-btn-primary am-dropdown-toggle am-btn-sm"><span class="am-icon-user"></span> <span class="am-icon-caret-down"></span></button>
        <ul class="am-dropdown-content">
          <li>
            <a href="/login/"><span class="am-icon-sign-in am-icon-fw"> {{ _('Login') }}</spin></a>
          </li>
          <li>
            <a href="/signin/"><span class="am-icon-user-plus am-icon-fw"> {{ _('Signin') }}</span></a>
          </li>
        </ul>
      </div>
      {% else %}
      <div class="am-dropdown" data-am-dropdown>
        <button class="am-btn am-btn-primary am-dropdown-toggle am-btn-sm"><span class="am-icon-user"> {{ user_name }}</span> <span class="am-icon-caret-down"></span></button>

        <ul class="am-dropdown-content">
          <li>
            <a href="{{ user_link }}"><span class="am-icon-dashboard am-icon-fw"> {{ _('Dashboard') }}</span></a>
          </li>
          <li class="am-divider"></li>
          <li>
            <a href="/edit/"><span class="am-icon-plus am-icon-fw"> {{ _('New Post') }}</span></a>
          </li>
          <li class="{{ 'am-active' if nav_active == 'jolla_task' else '' }}">
            <a href="/jolla/task/"><span class="iconfont icon-jolla"> {{ _('New Jolla Translation') }}</span></a>
          </li>
          <li>
            <a href="/jolla/translate/"><span class="am-icon-language am-icon-fw"> {{ _('Translate a Jolla Post') }}</span></a>
          </li>
          <li class="am-divider"></li>
          <li>
            <a href="/logout/"><span class="am-icon-sign-out am-icon-fw"> {{ _('Logout')}}</span></button>
          </li>
        </ul>
      </div>
      {% end %}
      <div class="am-dropdown" data-am-dropdown  data-role="switch-lang-dropper">
        <button class="am-btn am-btn-success am-dropdown-toggle am-btn-sm"><span class="am-icon-globe"> 语言/Language</span> <span class="am-icon-caret-down"></span></button>
        <ul class="am-dropdown-content">
          <li class="{{ 'am-active' if locale.code[:2] == 'zh' else '' }}">
            <a href="./?lang=zh" data-role="switch-lang" data-lang="zh"><span class="am-badge am-badge-success">zh-CN</span> 中文/Chinese</a>
          </li>
          <li class="{{ 'am-active' if locale.code[:2] == 'en' else '' }}">
            <a href="./?lang=en" data-role="switch-lang" data-lang="en"><span class="am-badge am-badge-success">en-US</span> 英文/English</a>
          </li>
        </ul>
      </div>
    </div>
  </div>
</header>

{% end %}

{% block body %}
{% end %}

<footer class="am-footer am-footer-default">
  {% block footer %}
  <div>
    <a href="//tomorrow.becomes.today">tomorrow.becomes.today</a> <span class="am-footer-divider">|</span>
      <small>&#169; 2015 <a href="mailto:tylertempdev@gmail.com">TylerTemp</a></small>

  </div>
  <div class="am-footer-miscs">
    {% if locale.code[:2] == 'zh' %}
    <p>
      <a href="http://qiniu.com" target="_blank"><img src="http://assets.qiniu.com/qiniu-55x41.png" style="width:40px; height:auto;"> QiNiu</a> &amp;
      <a href="http://amazeui.org/" target="_blank"><img src="http://s.amazeui.org/assets/2.x/i/favicon.png" style="width:20px; height:auto;"> AmazeUI</a> &amp;
      <a href="http://duoshuo.com" target="_blank"><img src="//static.duoshuo.com/favicon.ico" style="width:16px; height:16px;"> DuoSuo</a>
      强力驱动
    </p>
    {% else %}
    <p>Powered by
      <a href="http://qiniu.com" target="_blank"><img src="http://assets.qiniu.com/qiniu-55x41.png" style="width:40px; height:auto;"> QiNiu</a> &amp;
      <a href="http://amazeui.org/" target="_blank"><img src="http://s.amazeui.org/assets/2.x/i/favicon.png" style="width:20px; height:auto;"> AmazeUI</a> &amp;
      <a href="http://duoshuo.com" target="_blank"><img src="//static.duoshuo.com/favicon.ico" style="width:16px; height:16px;"> DuoSuo</a>
    </p>
    {% end %}
    <span class="am-footer-divider">|</span>
    <p><a href="https://github.com/TylerTemp/tomorrow" target="_blank">Fork me on <span class="am-icon-github am-text-warning"> GitHub</span></a></p>
  </div>
  {% end %}
</footer>

<script>
  var locale = "{{ locale.code[:2] }}";
</script>

<!--[if (gte IE 9)|!(IE)]><!-->
<script src="https://dn-tomorrow.qbox.me/jquery2.1.1.min.js"></script>
<!--<![endif]-->
<!--[if lte IE 8 ]>
<script src="https://dn-tomorrow.qbox.me//jquery1.11.1.min.js"></script>
<![endif]-->
<script src="https://dn-tomorrow.qbox.me/amazeui.min.js"></script>

<script>
  window.jQuery || document.write('<script src="{{ static_path('/js/jquery/jquery2.1.1.min.js') }}" type="text/javascript"><\/script>')
</script>

<script src="{{ static_path('/js/app.js') }}"></script>

{% block navjs %}
<script>
  $("[data-role='switch-lang']").click(function(evt)
  {
    evt.preventDefault();
    var self = $(this);
    var to_lang = self.data('lang');
    console.log('switch language from ' + locale + ' to ' + to_lang);
    $("[data-role='switch-lang-dropper']").dropdown('close');
    if (to_lang == locale)
      return;
    change_lang(to_lang);
    var msg = '';
    to_lang_2 = to_lang.substring(0, 2);

    console.log('current: ' + locale + '; set to ' + to_lang_2);

    var partly_support = (to_lang_2 !== 'zh');
    var refresh = (to_lang_2 !== locale);
    var refresh_now = false;
    locale = to_lang_2;

    if (partly_support)
      msg += 'Please note: this is a Chinese website. Most articles will still be in Chinese.\n';
    if (refresh)
      msg += _('Refreshing page is required to change language. Refresh now?');

    if (refresh)
      refresh_now = confirm(msg);
    else if (msg)
      return alert(msg);
    else
      return ;

    if (refresh_now)
      location.reload();
  });
</script>
{% end %}


{# for js #}
{% block butt %}
{% end %}
</body>
</html>
